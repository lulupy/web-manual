#　事件应用

## 拖拽

拖拽原理

－　三大事件
    －　onmousedown : 选择元素
    －　onmousemove : 移动元素
    －　onmouseup   : 释放元素


```html
<style>
div{
    height: 100px;
    width: 100px;
    background: yellowgreen;
    position: absolute;
}
</style>
<div id="div1"></div>
```

```js
var oDiv = document.getElementById('div1');

oDiv.onmousedown = function(){
    oDiv.onmousemove = function(){//鼠标移动事件是在鼠标按下事件之后

    }

    oDiv.onmouseup = function (){//鼠标抬起之后要清除鼠标按下事件
        oDiv.onmousemove= null;
        oDiv.onmouseup = null;
    }
}
```

－　鼠标和Div的相对距离不变

```js
var oDiv = document.getElementById('div1');

oDiv.onmousedown = function(ev){
    var ev = ev || window.event;

    //鼠标和Div的相对距离 
    var disX = ev.clientX - oDiv.offsetLeft;
    var disY = ev.clientY - oDiv.offsetTop;

    oDiv.onmousemove = function(ev){
        var ev = ev || window.event;
        oDiv.style.left = ev.clientX - disX + 'px';
        oDiv.style.top = ev.clientY - disY + 'px';
    }

    oDiv.onmouseup = function (){
        oDiv.onmousemove= null;
        oDiv.onmouseup = null;
    }
}
```

－　把拖拽加到document上

如果拖得太快，　会移出div, 可以把onmousemove事件加在document上

注意：移出事件也是在doucment

```js
var oDiv = document.getElementById('div1');

oDiv.onmousedown = function(ev){
    var ev = ev || window.event;
    var disX = ev.clientX - oDiv.offsetLeft;
    var disY = ev.clientY - oDiv.offsetTop;
    document.onmousemove = function(ev){
        var ev = ev || window.event;
        oDiv.style.left = ev.clientX - disX + 'px';
        oDiv.style.top = ev.clientY - disY + 'px';
    }

    oDiv.onmouseup = function (){
        document.onmousemove= null;
        oDiv.onmouseup = null;
    }
}
```













